{"version":3,"sources":["blog/wordpressApi.js"],"names":["getPosts","promiseForRequest","configRequest","config","companyPostsUrl","rootUrl","postsUrl","companyQuery","Object","assign","query","timeout","Promise","resolve","reject","resolveRequest","err","resp","body","url","method"],"mappings":";;;;;;;AAAA;;AACA;;;;;;AAEO,IAAMA,8BACT,SADSA,QACT;AAAA,SACAC,kBACEC,cAAcC,MAAd,EAAsBC,eAAtB,EAAuC,KAAvC,CADF,CADA;AAAA,CADG;;AAMP;;AAEA;AACA,IAAMC,UAAU,sEAAhB;AACA,IAAMC,WAAW,kBAAQD,OAAR,EAAiB,OAAjB,CAAjB;AACA,IAAME,eAAe,kBAArB;AACA,IAAMH,kBAAkB,iBAAOI,OAAOC,MAAP,CAAc,gBAAMH,QAAN,CAAd,EAA+B,EAAEI,OAAOH,YAAT,EAA/B,CAAP,CAAxB;;AAEA;AACA,IAAMI,UAAU,IAAhB,C,CAAsB;AACtB,IAAMR,SAAS,EAAEQ,gBAAF,EAAf;;AAEA;;AAEA,IAAMV,oBACF,SADEA,iBACF,CAACE,MAAD;AAAA,SACA,IAAIS,OAAJ,CACE,UAACC,OAAD,EAAUC,MAAV;AAAA,WAAqB,uBAAQX,MAAR,EAAgBY,eAAeF,OAAf,EAAwBC,MAAxB,CAAhB,CAArB;AAAA,GADF,CADA;AAAA,CADJ;;AAMA,IAAMC,iBACF,SADEA,cACF,CAACF,OAAD,EAAUC,MAAV;AAAA,SAAqB,UAACE,GAAD,EAAMC,IAAN,EAAYC,IAAZ,EAAqB;AAC1C,QAAIF,GAAJ,EAAS;AACPF,aAAOE,GAAP;AACD,KAFD,MAGK;AACHH,cAAQ,CAAEI,IAAF,EAAQC,IAAR,CAAR;AACD;AACF,GAPC;AAAA,CADJ;;AAUA,IAAMhB,gBACF,SADEA,aACF,CAACC,MAAD,EAASgB,GAAT,EAAcC,MAAd;AAAA,SACAZ,OAAOC,MAAP,CAAc,EAAd,EAAkBN,MAAlB,EAA0B,EAAEgB,QAAF,EAAOC,cAAP,EAA1B,CADA;AAAA,CADJ","file":"blog/wordpressApi.js","sourcesContent":["import { resolve, parse, format } from 'url';\nimport request from 'request';\n\nexport const getPosts\n  = () =>\n    promiseForRequest(\n      configRequest(config, companyPostsUrl, 'GET')\n    );\n\n// ------------------------------------------------------------\n\n// Urls.  We might consider moving these to a config file.\nconst rootUrl = 'https://public-api.wordpress.com/rest/v1.1/sites/innovatorylife.com/';\nconst postsUrl = resolve(rootUrl, 'posts');\nconst companyQuery = 'category=company';\nconst companyPostsUrl = format(Object.assign(parse(postsUrl), { query: companyQuery }));\n\n// Request config. These should be injected into `promiseForRequest` from a config file.\nconst timeout = 5000; // msecs\nconst config = { timeout };\n\n// ------------------------------------------------------------\n\nconst promiseForRequest\n  = (config) =>\n    new Promise(\n      (resolve, reject) => request(config, resolveRequest(resolve, reject))\n  );\n\nconst resolveRequest\n  = (resolve, reject) => (err, resp, body) => {\n    if (err) {\n      reject(err);\n    }\n    else {\n      resolve([ resp, body ]);\n    }\n  };\n\nconst configRequest\n  = (config, url, method) =>\n    Object.assign({}, config, { url, method });\n"],"sourceRoot":"/Users/john/Code/the-site/es6"}