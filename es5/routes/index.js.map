{"version":3,"sources":["index.js"],"names":[],"mappings":"AAAA,YAAY,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAWb,IAAI,MAAM,GAAG,kBAAQ,MAAM,EAAE,CAAC;;AAE9B,MAAM,CAAC,GAAG,CAAC,GAAG,EAAE,gBAAM,KAAK,CAAC,CAAC;AAC7B,MAAM,CAAC,GAAG,CAAC,kBAAkB,EAAE,oBAAU,KAAK,CAAC,CAAC;AAChD,MAAM,CAAC,GAAG,CAAC,yBAAyB,EAAE,oBAAU,MAAM,CAAC,CAAC;AACxD,MAAM,CAAC,GAAG,CAAC,UAAU,EAAE,gBAAM,OAAO,CAAC,CAAC;AACtC,MAAM,CAAC,GAAG,CAAC,OAAO,EAAE,eAAK,KAAK,CAAC,CAAC;AAChC,MAAM,CAAC,GAAG,CAAC,WAAW,EAAE,eAAK,KAAK,CAAC;;;;;;;;AAAC,AAQpC,MAAM,CAAC,IAAI,CAAC,QAAQ,EAAE,UAAC,GAAG,EAAE,GAAG,EAAK;AAClC,MAAI,SAAS,GAAG;AACZ,UAAM,EAAE,MAAM;GACjB,CAAC;;AAEF,MAAI,cAAc,GAAG,qBAAO,eAAe,CAAC,uCAAc;AACxD,WAAO,EAAE,OAAO;AAChB,QAAI,EAAE;;AAEJ,UAAI,EAAE,6BAA6B;AACnC,UAAI,EAAE,kBAAkB;KACzB;GACF,CAAC,CAAC,CAAC;;AAEJ,MAAI,QAAQ,GAAG,GAAG,CAAC,IAAI,CAAC,WAAW,GAAG,2BAA2B,GAAG,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC;AACnF,UAAQ,IAAI,qBAAqB,IAAI,GAAG,CAAC,IAAI,CAAC,GAAG,IAAI,KAAK,CAAA,AAAC,CAAC;;AAE5D,SAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;;AAEtB,gBAAc,CAAC,QAAQ,CAAC;AACtB,MAAE,EAAE,qDAAqD;AACzD,WAAO,EAAE,eAAe,GAAG,GAAG,CAAC,IAAI,CAAC,IAAI;AACxC,QAAI,EAAE,QAAQ;GACf,EAAE,UAAC,GAAG,EAAE,IAAI,EAAK;AAChB,QAAI,GAAG,EAAE;AACP,aAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;AACjB,eAAS,CAAC,MAAM,GAAG,MAAM,CAAC;AAC1B,SAAG,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;KACrB;;AAED,kBAAc,CAAC,QAAQ,CAAC;AACtB,UAAI,EAAE,qDAAqD;AAC3D,QAAE,EAAE,GAAG,CAAC,IAAI,CAAC,KAAK;AAClB,aAAO,EAAE,4BAA4B;AACrC,UAAI,EAAE,OAAO,GAAG,GAAG,CAAC,IAAI,CAAC,IAAI,GAAG,2HAA2H,GAAG,GAAG,CAAC,IAAI,CAAC,WAAW,GAAG,kIAAkI;KACxT,EAAE,UAAC,GAAG,EAAE,IAAI,EAAK;AACd,aAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;AACpB,UAAI,GAAG,EAAE;AACL,iBAAS,CAAC,MAAM,GAAG,MAAM,CAAC;OAC7B;;AAED,SAAG,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;KACrB,CAAC,CAAA;GACH,CAAC,CAAC;CACJ,CAAC,CAAC;;AAEH,MAAM,CAAC,OAAO,GAAG,MAAM,CAAC","file":"routes/index.js","sourcesContent":["'use strict';\n\nimport express    from 'express';\nimport pages      from './pages';\nimport portfolio  from './portfolio';\nimport blog       from './blog';\nimport fs         from 'fs';\nimport mailer     from 'nodemailer';\nimport smtpTransport from 'nodemailer-smtp-transport';\n// import oauth  from 'xoauth2';\n\nlet router = express.Router();\n\nrouter.get('/', pages.index);\nrouter.get('/portfolio/:name', portfolio.index);\nrouter.get('/portfolio/detail/:name', portfolio.detail);\nrouter.get('/contact', pages.contact);\nrouter.get('/blog', blog.index);\nrouter.get('/blog/:id', blog.posts);\n\n// let generator = oauth.createXOAuth2Generator({\n//   clientId: '478084717843-ur43h88t1mpc71ss8pn5g08a414j0ho9.apps.googleusercontent.com',\n//   clientSecret: 'g8y2BGQhCGpKOge66rzZc7xu',\n//   refreshToken: '1/w1AJNkOERoqJSIN9rwfNaaSJ8w94k-NKV9UjvUkoZi0'\n// });\n\nrouter.post('/email', (req, res) => {\n  let returnObj = {\n      result: 'sent'\n  };\n\n  let gmailTransport = mailer.createTransport(smtpTransport({\n    service: 'gmail',\n    auth: {\n      // xoauth2: generator\n      user: 'hello@iotopia-solutions.com',\n      pass: 'uSyiKT;d49=:rXb.'\n    }\n  }));\n\n  let emailMsg = req.body.description + '<br/><br/>contact email: ' + req.body.email;\n  emailMsg += '<br/><br/>website: ' + (req.body.url || 'N/A');\n\n  console.log(emailMsg);\n\n  gmailTransport.sendMail({\n    to: 'Iotopia Solutions Inc <hello@iotopia-solutions.com>',\n    subject: 'Inquiry from ' + req.body.name,\n    html: emailMsg\n  }, (err, info) => {\n    if (err) {\n      console.log(err);\n      returnObj.result = 'fail';\n      res.send(returnObj);\n    }\n\n    gmailTransport.sendMail({\n      from: 'Iotopia Solutions Inc <hello@iotopia-solutions.com>',\n      to: req.body.email,\n      subject: 'Thank you for your inquiry',\n      html: 'Dear ' + req.body.name + ',<br/><br/><p>Thank you for your inquiry to Iotopia Solutions Inc. We have receive the following message:</p><blockquote>' + req.body.description + '</blockquote><p>Someone will be in touch in with you shortly.</p> <p>Cheers, <br/><br/>Kianosh Pourian<br/>CEO and President</p>' \n    }, (err, info) => {\n        console.log(info);\n      if (err) {\n          returnObj.result = 'fail';\n      }\n\n      res.send(returnObj);\n    })\n  });  \n});\n\nmodule.exports = router;"],"sourceRoot":"/Volumes/Seagate Backup Plus Drive/Cloud/Dropbox/Private/Iotopia Solutions/the-site/es6"}